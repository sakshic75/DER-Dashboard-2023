generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model der_device {
  device_id                     Int                             @id @default(autoincrement())
  nameplate_id                  Int
  device_name                   String                          @db.VarChar(255)
  device_model_number           String                          @db.VarChar(255)
  device_location               String                          @db.VarChar(255)
  der_nameplate                 der_nameplate                   @relation(fields: [nameplate_id], references: [nameplate_id], onDelete: NoAction, onUpdate: NoAction)
  der_device_security           der_device_security[]
  der_network_data              der_network_data[]
  device_monitoring_energy_data device_monitoring_energy_data[]
}

model der_device_security {
  device_security_id                  Int        @id @default(autoincrement())
  device_id                           Int
  device_security_certificate_number  String     @db.VarChar(255)
  device_security_certificate_expdate DateTime   @db.Date
  der_device                          der_device @relation(fields: [device_id], references: [device_id], onDelete: NoAction, onUpdate: NoAction)
}

model der_nameplate {
  nameplate_id             Int          @id @default(autoincrement())
  der_max_input_voltage    Decimal      @db.Decimal(6, 2)
  der_max_input_current    Decimal      @db.Decimal(6, 2)
  der_max_output_voltage   Decimal      @db.Decimal(6, 2)
  der_output_power         Decimal      @db.Decimal(6, 2)
  der_output_frequency     Decimal      @db.Decimal(6, 2)
  der_max_output_current   Decimal      @db.Decimal(6, 2)
  der_operating_temp_range String       @db.VarChar(20)
  der_device               der_device[]
}

model der_network_data {
  der_network_id  Int        @id @default(autoincrement())
  device_id       Int
  device_location String?    @db.VarChar(255)
  mac_address     String?    @db.VarChar(255)
  connection      String?    @db.VarChar(255)
  ip_address      String?    @db.VarChar(255)
  der_device      der_device @relation(fields: [device_id], references: [device_id], onDelete: NoAction, onUpdate: NoAction)
}

model device_monitoring_energy_data {
  data_id        Int        @id @default(autoincrement())
  device_id      Int
  timestamp      DateTime?  @db.Timestamp(6)
  active_power   Decimal    @db.Decimal(6, 2)
  reactive_power Decimal    @db.Decimal(6, 2)
  apparent_power Decimal    @db.Decimal(6, 2)
  voltage        Decimal    @db.Decimal(6, 2)
  current        Decimal    @db.Decimal(6, 2)
  frequency      Decimal    @db.Decimal(6, 2)
  der_device     der_device @relation(fields: [device_id], references: [device_id], onDelete: NoAction, onUpdate: NoAction)
}
